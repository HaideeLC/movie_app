<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>é›»å½±åˆ—è¡¨</title>
    <style>
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        img { width: 100px; height: 150px; object-fit: cover; }
        .book-btn { padding: 4px 8px; border: none; border-radius: 4px; background-color: green; color: white; cursor: pointer; }
        .disabled { color: gray; }
        a { text-decoration: none; }
        hr { margin: 20px 0; }
    </style>
</head>
<body>

<!-- å°è¦½åˆ— -->
{% if session.username %}
<p>
    ä½ å¥½ï¼Œ{{ session.username }} | 
    <a href="/logout">ç™»å‡º</a> | 
    <a href="/order">ğŸ“„ æŸ¥è©¢è¨‚å–®</a>
</p>
{% else %}
<p>
    <a href="/login">ç™»å…¥</a> | 
    <a href="/register">è¨»å†Š</a> | 
    <a href="/order">ğŸ“„ æŸ¥è©¢è¨‚å–®</a> | 
    <a href="/employee_login">å“¡å·¥ç™»å…¥</a>
</p>
{% endif %}

<hr>

<h1>é›»å½±åˆ—è¡¨</h1>

<table>
    <thead>
        <tr>
            <th>é›»å½±åç¨±</th>
            <th>é›»å½±ç¸®åœ–</th>
            <th>æ”¾æ˜ æ™‚é–“</th>
            <th>æ“ä½œ</th>
        </tr>
    </thead>
    <tbody>
        {% for movie in movies %}
        <tr>
            <td>{{ movie.title }}</td>
            <td>
                {% if movie.poster_url %}
                    <img src="{{ movie.poster_url }}" alt="{{ movie.title }}">
                {% else %}
                    <img src="https://via.placeholder.com/100x150?text=No+Image" alt="No Image">
                {% endif %}
            </td>
            <td>{{ movie.showtime }}</td>
            <td>
                {% if session.username %}
                    <form method="get" action="/book/{{ movie.id }}">
                        <button type="submit" class="book-btn">è¨‚ç¥¨</button>
                    </form>
                {% else %}
                    <span class="disabled">è«‹å…ˆç™»å…¥</span>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

</body>
</html>